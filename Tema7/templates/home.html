{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container">
    <div class="p-5 mb-4 bg-light rounded-3">
        <div class="container-fluid py-5">
            <h1 class="display-5 fw-bold">–ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞</h1>
            <p class="col-md-8 fs-4">–ü–æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –ª—É—á—à–∏–º–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º–∏ –∏ –Ω–æ–≤—ã–º–∏ —Ç–∞–ª–∞–Ω—Ç–∞–º–∏ –≤ –Ω–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏.</p>
        </div>
    </div>

    <!-- –ë–õ–û–ö ‚Ññ1: –¢–æ–ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->

    <h2 class="mb-4">üèÜ –¢–æ–ø 5 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –Ω–∞–≤—ã–∫–∞–º</h2>
    <div class="row">
        {% for employee in top_employees %}
        <div class="col-lg col-md-4 col-sm-6 mb-4">
            <div class="card h-100 shadow-sm">
                {% if forloop.first and employee.total_skill_level > 0 %}
                    <div style="position: absolute; top: 10px; right: -10px; background-color: #ffc107; color: black; padding: 5px 15px; transform: rotate(20deg); font-weight: bold; z-index: 10;">‚≠ê –¢–æ–ø-1</div>
                {% endif %}

                <a href="{% url 'employees:employee_detail' employee.pk %}">
                    {% if employee.get_first_image %}
                        <img class="card-img-top card-img-top-fixed" src="{{ employee.get_first_image.image.url }}" alt="{{ employee.full_name }}">
                    {% else %}
                        <img class="card-img-top card-img-top-fixed" src="https://via.placeholder.com/400x300.png?text=No+Photo" alt="–ù–µ—Ç —Ñ–æ—Ç–æ">
                    {% endif %}
                </a>
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">
                        <a href="{% url 'employees:employee_detail' employee.pk %}">{{ employee.full_name|default:employee.user.username }}</a>
                    </h5>
                    <p class="card-text text-muted">{{ employee.position.name|default:"–ë–µ–∑ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏" }}</p>
                    <div class="mt-auto pt-2">
                        <p class="mb-1"><strong>–û–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥: {{ employee.total_skill_level|default:0 }}</strong></p>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col">
            <p class="alert alert-info">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö —Å –Ω–∞–≤—ã–∫–∞–º–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞.</p>
        </div>
        {% endfor %}
    </div>

    <!-- –ë–õ–û–ö ‚Ññ2: –ù–µ–¥–∞–≤–Ω–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª–∏—Å—å -->

    <h2 class="mb-4 mt-5">‚ú® –ù–µ–¥–∞–≤–Ω–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª–∏—Å—å</h2>
    <div class="row">
        {% for employee in recent_employees %}
        <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
            <div class="card h-100">
                <a href="{% url 'employees:employee_detail' employee.pk %}">
                    {% if employee.get_first_image %}
                        <img class="card-img-top card-img-top-fixed" src="{{ employee.get_first_image.image.url }}" alt="{{ employee.full_name }}">
                    {% else %}
                        <img class="card-img-top card-img-top-fixed" src="https://via.placeholder.com/400x300.png?text=No+Photo" alt="–ù–µ—Ç —Ñ–æ—Ç–æ">
                    {% endif %}
                </a>
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">
                        <a href="{% url 'employees:employee_detail' employee.pk %}">{{ employee.full_name|default:employee.user.username }}</a>
                    </h5>
                    <p class="card-text">{{ employee.position.name|default:"–ë–µ–∑ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏" }}</p>

                    <div class="mt-auto pt-2">
                        <small class="text-muted">
                            –í –∫–æ–º–ø–∞–Ω–∏–∏: {{ employee.get_work_experience_days }} –¥{{ employee.get_work_experience_days|pluralize:"–µ–Ω—å,–Ω—è,–Ω–µ–π" }}
                        </small>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col">
            <p>–ü–æ–∫–∞ –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–æ–≤—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö.</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}